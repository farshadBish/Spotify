<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css" />
  <title>Album</title>
  <link rel="stylesheet" href="album.css" />
   <link rel="stylesheet" href="playbar.css"> 
  <link rel="stylesheet" href="./pages/sidebar.css">
</head>

<body>
  <div class="body-container m-auto p-0">
    <div class="sidebar">
      <div class="sidebar-top d-flex flex-column">
        <div class="logo">
          <a href="#"><img id="logo" src="./asset/Spotify_Logo.png" alt="" /></a>
        </div>
        <div class="sidebar-link d-flex flex-column py-3">
          <a href="./home-page.html" class="sidebar-item active"><i
              class="bi bi-house-door-fill sidebar-item-img"></i><span>Home</span></a>
          <a onclick="searchBarShow()" id="searchBarShow" class="sidebar-item">

            <i class="bi bi-search sidebar-item-img"></i><span>Search</span>

          </a>

          </a>
          <a class="sidebar-item"><i class="bi bi-music-note-list sidebar-item-img"></i><span>Your
              Library</span></a>
        </div>
        <div class="song-action sidebar-link d-flex flex-column">
          <a class="sidebar-item"><i class="bi bi-plus-square-fill sidebar-item-img"></i><span>Create
              Playlist</span></a>
          <a class="sidebar-item sidebar-item img py-1 pl-2"><svg width="21" height="21" viewBox="0 0 17 17" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <rect width="17" height="17" fill="url(#paint0_linear_416_5)" />
              <path
                d="M5.25 3C7.04563 3 8.5 4.40809 8.5 6.14513C8.5 4.40809 9.95437 3 11.75 3C13.5456 3 15 4.40809 15 6.14513C15 8.76313 12.3724 9.68661 8.8185 13.8539C8.77937 13.8997 8.7306 13.9365 8.67559 13.9617C8.62058 13.9869 8.56066 14 8.5 14C8.43934 14 8.37942 13.9869 8.32441 13.9617C8.2694 13.9365 8.22063 13.8997 8.1815 13.8539C4.62762 9.68661 2 8.76313 2 6.14513C2 4.40809 3.45437 3 5.25 3Z"
                fill="#B0B0B0" />
              <defs>
                <linearGradient id="paint0_linear_416_5" x1="-7.5" y1="6" x2="30.5" y2="14"
                  gradientUnits="userSpaceOnUse">
                  <stop stop-color="#9D0DD0" />
                  <stop offset="1" stop-color="#E9E4EB" stop-opacity="0.62" />
                </linearGradient>
              </defs>
            </svg>
            <span style="margin-left: 0.9rem;">Liked Songs</span></a>
        </div>
      </div>
      <div class="sidebar-bottom mt-2">
        <div class="feature-div d-flex flex-column" id="style-1">
          <!-- <a class="feature-item my-1">Liked Songs fgfg</a>
          <a class="feature-item my-1">Liked Songsv</a>
          <a class="feature-item my-1">Liked Songsccc</a> -->
          <!-- <a class="feature-item my-1">Liked Songs</a> -->
        </div>
      </div>
    </div>
    <div class="backgroundColor p-0">
      <div class="col-12 p-0">
        <div class="m-auto d-flex col-11 justify-content-between align-items-center nav-top">
          <div class="control-arrow col-6 d-flex mx-1">
            <img class="arrow-left mx-1" src="./asset/chevron-left.svg" alt="" />
            <img class="arrow-right mx-1" src="./asset/chevron-right.svg" alt="" />


            <div id="searchBar" class="input-group-append d-none bg-light  rounded-pill mx-3 search-bar-hidden ">
              <div class="input-group d-flex">
                <button onclick="searchTitle()" class="btn text-white shadow-none p-0 ml-1" type="button"
                  id="button-addon2">
                  <i class="bi bi-search sidebar-item-img text-dark"></i>
                </button>
                <input id="textInput" type="text" class="form-control  rounded-pill out shadow-none border-0 p-0"
                  placeholder="Enter artist name" aria-label="Recipient's username" aria-describedby="button-addon2" />
              </div>
            </div>
          </div>
          <div class="profile rounded-pill col-6 text-end">
            <div class="dropdown">
              <img class="profile-img mx-2" src="./asset/person-circle.svg" alt="" />

              <button class="btn dropdown-toggle p-0 userName" type="button" id="dropdownMenuButton1"
                data-bs-toggle="dropdown" aria-expanded="false"><a class="log-in" href="./login-page.html"><span>Log
                    in</span></a>

              </button>
              <ul class="dropdown-menu bg-dark mt-2" aria-labelledby="dropdownMenuButton1">
                <li>
                  <a class="dropdown-item text-light text-center font-weight-bolder" href="./login-page.html"><span>Log
                      out</span></a>
                </li>
                <li>
                  <a class="dropdown-item text-light text-center font-weight-bolder" href="./login-page.html"><span>Log
                      in</span></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-5 albumContainer">
      </div>
      <div class="row trasparentDark mt-4 ml-0 mr-0">
        <div class="col-12 mt-4 d-flex">
          <div class="playBtn ml-3">
            <i class="bi bi-play-fill forPlay"></i>
          </div>
          <i class="bi bi-heart align-self-center ml-4 text-white-50"></i>
          <div class="btn-group dropright align-self-start ml-3">
            <button type="button" class="btn bg-transparent text-white dropdown-toggle" data-toggle="dropdown"
              aria-expanded="false">
              <b> . . .</b>
            </button>
            <div class="dropdown-menu bg-dark">
              <a class="dropdown-item text-white mb-1" href="#">Add to queue</a>
              <a class="dropdown-item text-white mb-1" href="#">Go to playlist radio</a>
              <a class="dropdown-item text-white mb-1 border-bottom border-top pb-2" href="#">Add to profile</a>
              <a class="dropdown-item text-white mb-1" href="#">Report</a>
              <a class="dropdown-item text-white mb-1" href="#">Remove from Your Library</a>
              <a class="dropdown-item text-white mb-1" href="#">Download</a>
              <a class="dropdown-item text-white mb-1" href="#">Share</a>
            </div>
          </div>
        </div>
        <div class="col-12 d-flex">
          <table class="table table-borderless text-white mx-3">
            <thead>
              <tr class="border-bot d-flex justify-content-between">
                <th scope="col" class="text-white-50">
                  #<span class="ml-4">Title</span>
                </th>
                <th scope="col" class="text-white-50">
                  <i class="bi bi-clock mr-2"></i>
                </th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div id="pb-container-fluid" class="playbar container-fluid">
      <div class=" d-flex row flex-nowrap justify-content-center mt-0">
        <div class="pb-left-section d-flex flex-row align-items-center col">
          <img id="pb-img-left" src="https://i.scdn.co/image/ab67616d00004851a12c000028e343a8496612bf" />
          <div class="px-3 text-truncate">
            <p id="titels" class="mb-0">Another One Bites The Dust - Remastered 2011</p>
            <p id="name" class="mb-0">Queen</p>
          </div>
          <div class="control-btn" style="margin-left:10px">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#1ed760"
              class="bi bi-heart-fill svg-heart-fill d-none" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#B4B4B4"
              class="bi bi-heart svg-heart-empty" viewBox="0 0 16 16">
              <path
                d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z" />
            </svg>
          </div>
          <div class="control-btn">
            <svg id="svg-make-album-img-big" width="16" height="16" fill="#B4B4B4" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 3v9h14V3H1zm0-1h14a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"
                fill-rule="nonzero"></path>
              <path d="M10 8h4v3h-4z"></path>
            </svg>

          </div>
        </div>
        <div class="middle-section col-5 d-flex flex-column">
          <div class="d-flex flex-row align-items-center justify-content-center ">
            <div class="control-btn control-btn-left">
              <svg role="img" height="16" width="16" viewBox="0 0 16 16" fill="#B4B4B4">
                <path
                  d="M13.151.922a.75.75 0 10-1.06 1.06L13.109 3H11.16a3.75 3.75 0 00-2.873 1.34l-6.173 7.356A2.25 2.25 0 01.39 12.5H0V14h.391a3.75 3.75 0 002.873-1.34l6.173-7.356a2.25 2.25 0 011.724-.804h1.947l-1.017 1.018a.75.75 0 001.06 1.06L15.98 3.75 13.15.922zM.391 3.5H0V2h.391c1.109 0 2.16.49 2.873 1.34L4.89 5.277l-.979 1.167-1.796-2.14A2.25 2.25 0 00.39 3.5z">
                </path>
                <path
                  d="M7.5 10.723l.98-1.167.957 1.14a2.25 2.25 0 001.724.804h1.947l-1.017-1.018a.75.75 0 111.06-1.06l2.829 2.828-2.829 2.828a.75.75 0 11-1.06-1.06L13.109 13H11.16a3.75 3.75 0 01-2.873-1.34l-.787-.938z">
                </path>
              </svg>
            </div>
            <div class="control-btn control-btn-left">
              <svg role="img" height="14" width="14" viewBox="0 0 16 16" fill="#B4B4B4">
                <path
                  d="M3.3 1a.7.7 0 01.7.7v5.15l9.95-5.744a.7.7 0 011.05.606v12.575a.7.7 0 01-1.05.607L4 9.149V14.3a.7.7 0 01-.7.7H1.7a.7.7 0 01-.7-.7V1.7a.7.7 0 01.7-.7h1.6z">
                </path>
              </svg>
            </div>
            <div class="play-btn">
              <div class="play-triangle">

              </div>
            </div>
            <div class="control-btn control-btn-right">
              <svg role="img" height="14" width="14" viewBox="0 0 16 16" fill="#B4B4B4">
                <path
                  d="M12.7 1a.7.7 0 00-.7.7v5.15L2.05 1.107A.7.7 0 001 1.712v12.575a.7.7 0 001.05.607L12 9.149V14.3a.7.7 0 00.7.7h1.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7h-1.6z">
                </path>
              </svg>
            </div>
            <div class="control-btn control-btn-right">
              <svg role="img" height="16" width="16" viewBox="0 0 16 16" fill="#B4B4B4">
                <path
                  d="M0 4.75A3.75 3.75 0 013.75 1h8.5A3.75 3.75 0 0116 4.75v5a3.75 3.75 0 01-3.75 3.75H9.81l1.018 1.018a.75.75 0 11-1.06 1.06L6.939 12.75l2.829-2.828a.75.75 0 111.06 1.06L9.811 12h2.439a2.25 2.25 0 002.25-2.25v-5a2.25 2.25 0 00-2.25-2.25h-8.5A2.25 2.25 0 001.5 4.75v5A2.25 2.25 0 003.75 12H5v1.5H3.75A3.75 3.75 0 010 9.75v-5z">
                </path>
              </svg>
            </div>

          </div>
          <div class="progress-container d-flex align-items-center justify-content-center pb-0">
            <p class="mb-0 mx-1 pb-time">0:00</p>
            <div class="progress-bar"></div>
            <p class="mb-0 mx-1 pb-time">3:33</p>
          </div>
        </div>
        <div class="right-section col d-flex align-items-center justify-content-end">
          <div class="control-btn d-flex align-items-center justify-content-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#B4B4B4" class="bi bi-text-indent-left"
              viewBox="0 0 16 16">
              <path
                d="M2 3.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm.646 2.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L4.293 8 2.646 6.354a.5.5 0 0 1 0-.708zM7 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm-5 3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z" />
            </svg>
          </div>
          <div class="control-btn d-flex align-items-center justify-content-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#B4B4B4" class="bi bi-pc-display"
              viewBox="0 0 16 16">
              <path
                d="M8 1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V1Zm1 13.5a.5.5 0 1 0 1 0 .5.5 0 0 0-1 0Zm2 0a.5.5 0 1 0 1 0 .5.5 0 0 0-1 0ZM9.5 1a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5ZM9 3.5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 0-1h-5a.5.5 0 0 0-.5.5ZM1.5 2A1.5 1.5 0 0 0 0 3.5v7A1.5 1.5 0 0 0 1.5 12H6v2h-.5a.5.5 0 0 0 0 1H7v-4H1.5a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5H7V2H1.5Z" />
            </svg>
          </div>
          <div class="control-btn d-flex align-items-center justify-content-center">
            <svg class="sound-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#B4B4B4"
              class="bi bi-volume-up-fill" viewBox="0 0 16 16">
              <path
                d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z" />
              <path
                d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z" />
              <path
                d="M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor"
              class="bi bi-volume-mute-fill sound-icon-crossed d-none" viewBox="0 0 16 16">
              <path
                d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z" />
            </svg>
          </div>
          <div class="volume-bar ">

          </div>
        </div>
      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
    crossorigin="anonymous"></script>
  <script>
    window.onscroll = function () {
      scrollNavbar()
    }
    function scrollNavbar() {
      let navbarBg = document.querySelector(".nav-top")

      //console.log(navLinks);
      if (document.documentElement.scrollTop > 2) {
        navbarBg.classList.add("scroll")
        // Change the color of navLinks on scroll
      } else {
        navbarBg.classList.remove("scroll")
        // Change the color of navLinks back to default
      }
    }
  </script>
  <script>
    let api = "https://striveschool-api.herokuapp.com/api/deezer/album"
    let endPoint = new URLSearchParams(window.location.search).get("id");
    let url = api + "/" + endPoint
    window.onload = () => {
      musicFetch();
    }
    const musicFetch = async () => {
      try {
        const response = await fetch(url);
        const musics = await response.json();
        console.log(musics);
        renderAlbum(musics);
        renderTracks(musics)
        putTitle(musics);
        // putPic();
        changeSoundIcon();
        fillHeartGreen();
      } catch (err) {
        console.log(err);
      }
    };
    const renderAlbum = (obj) => {
      let durationHr = Math.floor(obj.duration / 3600);
      let durationMin = Math.floor(obj.duration % 3600 / 60);
      let album = document.querySelector('.albumContainer');
      album.innerHTML = `  <div class="col-xl-2 col-lg-2 col-12 pr-0 ml-lg-2 ml-md-0 albumPicContainer">
          <img src="${obj.cover_xl}" class="rounded w-100 shadow-lg ml-lg-4 mt-5 ml-md-0" alt="..." />
        </div>
        <div class="col-9 mt-xl-auto mt-lg-auto mt-2 mt-md-3 ml-3 ml-md-4">
          <h6 class="text-white">Album</h6>
          <h3 class="text-white align-self-end lineHeight">
            ${obj.title}
          </h3>
          <p class="small text-white mb-1 align-self-center"><a class="linkDis" href="./Artist.html?artist=${obj.artist.name}&userId=${user_id}">
            <img src="${obj.artist.picture_xl}" alt=""
              style="border-radius: 50%" width="20" class="mr-1" />${obj.artist.name}</a>
            <span class="text-white-50"> - ${obj.release_date} - ${obj.nb_tracks} songs, ${durationHr}hr ${durationMin}min </span>
          </p>
        </div>`
    };
    const renderTracks = (obj) => {
      let musicContainer = document.querySelector("tbody");
      let tracksCon = obj.tracks.data;
      let counter = 00;
      console.log(tracksCon);
      for (let i = 0; i < tracksCon.length; i++) {
        const track = tracksCon[i];
        let durationMin = Math.floor(track.duration / 60).toString()
        let durationSec = "0" + Math.floor(track.duration % 60).toString();
        counter = counter + 1;
        let tr = document.createElement("tr");
        let div = document.createElement("div")
        div.className = "musicContainers"
        tr.className = "d-flex justify-content-between hoverIt musicsInside"
        tr.innerHTML = `<th scope="row" class="text-white-50">
                  <span class="numberHover">-</span><i class="bi bi-play"></i><span
                    class=" text-white makeSmaller ml-4">${track.title}</span>
                  <small class="text-white-50 margins d-block"><b>${track.artist.name}</b></small>
                </th>
                <td class="text-white-50">${durationMin.substring(durationMin.length - 2, durationMin.length)}:${durationSec.substring(durationSec.length - 2, durationSec.length)}</td>`
        div.appendChild(tr)
        musicContainer.appendChild(div);
      }
    };
    const putTitle = (obj) => {
      let musicContainer = document.querySelectorAll(".musicContainers");
      let footerTitle = document.querySelector("#titels");
      let footerName = document.querySelector("#name");
      let smallPic = document.getElementById("pb-img-left")
      for (let i = 0; i < musicContainer.length; i++) {
        const aTtitle = musicContainer[i];
        const tr = aTtitle.querySelector(".musicsInside")
        let titleNode = aTtitle.querySelectorAll(".makeSmaller");
        let artistName = aTtitle.querySelectorAll(".margins")
        tr.addEventListener("click", function () {
          for (let j = 0; j < titleNode.length; j++) {
            const title = titleNode[j];
            footerTitle.innerHTML = title.innerHTML;
          }
          for (let t = 0; t < artistName.length; t++) {
            const name = artistName[t];
            footerName.innerHTML = name.innerHTML;
          }
          smallPic.style.display = "none";
          const div = document.querySelector(".feature-div")
          div.innerHTML = `          <img class="img-fluid ml-2 mt-auto"
            src="${obj.cover_xl}"
            alt="">`
        })
      }
    };
    // obj.cover_xl

    let user_id = new URLSearchParams(window.location.search).get("userId")
console.log(user_id)
    const users = [
  {
    userId: "011",
    name: "Simon",
    password: "123456",
    avatar:
      "https://www.dmarge.com/wp-content/uploads/2021/01/dwayne-the-rock-.jpg",
  },
  {
    userId: "012",
    name: "Farshad",
    password: "123456",
    avatar:
      "https://nientepopcorn.b-cdn.net/persone-img/big/tom-hardy-2524.jpg",
  },
  {
    userId: "013",
    name: "Sidath",
    password: "123456",
    avatar:
      "https://s3-eu-west-1.amazonaws.com/static.screenweek.it/artist/7370.jpg",
  },
]
// Create user
const userImg = document.querySelector(".profile-img")
const userName = document.querySelector(".userName")
// users.forEach(user => {
//   user.userId=user_id
// console.log(user.userId)

// });
const result = users.filter((user) => user.userId == user_id)
console.log(result[0].name)
userName.textContent = result[0].name
userImg.src = result[0].avatar

  </script>
  <script src="playbar.js"> </script>
</body>

</html>